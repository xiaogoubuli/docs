安装
1. CentOS
  $ sudo yum install git
2. Windows
  msysgit http://msysgit.github.io/

配置
$ git config --global user.name "用户名"
$ git config --global user.email 电子邮箱

$ git config --global color.ui true

$ vi /etc/gitconfig
[gui]
    encoding = UTF-8

别名
$ git config --global alias.st status
$ git config --global alias.ci commit
$ git config --global alias.co checkout
$ git config --global alias.br branch
$ git config --global alias.unstage 'reset HEAD'
$ git config --global alias.last 'log -1'
$ git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --"
备份.gitconfig文件

创建版本库
1. $ mkdir 目录名
   $ cd 目录名
   $ git init

2. $ git init 目录名

把文件添加到版本库
1. $ git add 文件名
   $ git commit -m "描述信息"
2. $ git commit -a -m "描述信息" （不推荐）

$ git status
$ git status -s

$ git diff
$ git diff 文件名
$ git diff --cached

$ git log
$ git log --pretty=oneline
$ git log --pretty=raw
$ git log --pretty=raw --graph 提交ID

HEAD 当前分支

$ git reflog
$ git reflog show master
$ git reflog -数值

$ git diff
$ git diff HEAD -- 文件名
$ git diff HEAD

撤销工作目录修改
$ git checkout -- 文件名
$ git checkout .
$ git checkout 目录

撤销暂存区修改
$ git reset HEAD 文件名
$ git reset 文件名

工作目录暂存区不变
$ git reset --soft 提交ID

$ git reset --hard HEAD^
$ git reset --hard HEAD~100
$ git reset --hard 提交ID
$ git reset --hard master@{1}

删除
$ git rm 文件名
$ git commit -m "描述信息"

$ ssh-keygen -t rsa -C "电子邮箱"

id_rsa 私钥
id_rsa.pub 公钥

关联远程仓库
$ git remote add origin git@github.com:xiaogoubuli/docs.git

推送
$ git push -u origin master （第一次推送）
$ git push origin master

克隆版本库
$ git clone git@github.com:xiaogoubuli/docs.git

分支

创建分支
$ git branch 分支名称

切换分支
$ git checkout 分支名称

创建并切换分支
$ git checkout -b 分支名称

查看分支
$ git branch
$ git branch -v

合并分支

合并指定分支到当前分支
$ git merge 分支名称

$ git merge 提交ID

$ git cat-file -p HEAD

删除分支
$ git branch -d 分支名称

强制删除未合并的分支
$ git branch -d 分支名称

$ git log --graph --pretty=oneline --abbrev-commit

禁用快进模式合并分支
$ git merge --no-ff -m "merge with no-ff" 分支名称

$ git stash
$ git stash list
$ git stash pop
$ git stash apply stash@{0}

查看远程版本库信息
$ git remote
$ git remote -v

推送分支
$ git push 远程版本库 本地分支名称

抓取分支
$ git pull

设置本地分支与远程分支的链接
$ git branch --set-upstream 本地分支名称 远程版本库/远程分支名称

$ git fetch

在本地创建和远程分支对应的分支
$ git checkout -b 本地分支名称 远程版本库/远程分支名称

标签

查看所有标签
$ git tag

创建标签
$ git tag 标签名称
$ git tag 标签名称 提交ID

查看标签信息
$ git show 标签名称

创建带有说明的标签
$ git tag -a 标签名称 -m "描述信息" 提交ID

使用私钥签名创建标签
$ git tag -s 标签名称 -m "描述信息" 提交ID

删除标签
$ git tag -d 标签名称
$ git push 远程版本库 :refs/tags/标签名称

推送指定标签到远程
$ git push 远程版本库 标签名称

推送全部尚未推送的本地标签到远程
$ git push 远程版本库 --tags

忽略特殊文件 https://github.com/github/gitignore
编辑.gitignore文件
# Windows:
Thumbs.db
ehthumbs.db
Desktop.ini

搭建Git服务器
CentOS
安装git
$ sudo yum install git
创建git用户
$ sudo useradd git
$ sudo passwd git
$ su - git
$ ssh-keygen -t rsa -C "xiaogoubuli@163.com"
导入公钥id_rsa.pub到文件，一个公钥一行
$ vi /home/git/.ssh/authorized_keys
初始化Git仓库
$ sudo git init --bare demo.git
$ sudo chown -R git:git demo.git
禁止git用户shell登录/etc/passwd
git:x:501:501::/home/git:/usr/bin/git-shell

$ git clone git@server:/data/demo.git

用Gitosis管理公钥

用Gitolite控制权限

$ git gt



